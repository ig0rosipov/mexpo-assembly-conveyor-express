(this["webpackJsonpmexpo-assembly-conveyor-frontend"]=this["webpackJsonpmexpo-assembly-conveyor-frontend"]||[]).push([[0],{40:function(t,n,e){},73:function(t,n,e){"use strict";e.r(n);var o=e(0),c=e.n(o),r=e(32),s=e.n(r),a=(e(40),e(7)),u=e(33),i=e.n(u).a.connect("http://localhost:5000"),l=c.a.createContext(),h=e(34),f=e(35),p=new(function(){function t(){Object(h.a)(this,t),this._baseUrl="http://192.168.25.181"}return Object(f.a)(t,[{key:"_handleOriginalResponse",value:function(t){return t.ok?t:Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(t.status))}},{key:"runConveyor",value:function(){return fetch(this._baseUrl+"/run",{method:"GET",headers:{"Content-Type":"application/json"}}).then(this._handleOriginalResponse).then((function(t){return t.json()}))}},{key:"stopConveyor",value:function(){return fetch(this._baseUrl+"/stop",{method:"GET",headers:{"Content-Type":"application/json"}}).then(this._handleOriginalResponse).then((function(t){return t.json()}))}},{key:"checkState",value:function(){return fetch(this._baseUrl+"/check",{method:"GET",headers:{"Content-Type":"application/json"}}).then(this._handleOriginalResponse).then((function(t){return t.json()}))}}]),t}()),j=e(1),b=function(t){var n=Object(o.useState)("production"),e=Object(a.a)(n,2),c=e[0],r=e[1],s=Object(o.useState)([0,3,0]),u=Object(a.a)(s,2),i=u[0],h=u[1],f=Object(o.useState)(0),b=Object(a.a)(f,2),d=b[0],O=b[1],m=Object(o.useState)(3),g=Object(a.a)(m,2),v=g[0],y=g[1],C=Object(o.useState)(0),x=Object(a.a)(C,2),S=x[0],k=x[1],I=Object(o.useState)("no timestamp yet"),E=Object(a.a)(I,2),T=E[0],_=E[1],F=Object(o.useContext)(l);Object(o.useEffect)((function(){F.on("timestamp",(function(t){_(t)}))}));var P=function(t,n,e){O(t),y(n),k(e)};return Object(o.useEffect)((function(){r("starting"),P(0,0,5)}),[]),Object(o.useEffect)((function(){var t;return t=setInterval((function(){if(d<=0&&v<=0&&S<=0)switch(clearInterval(t),c){case"starting":p.checkState().then((function(t){return r(t.status),"running"===t.status?p.runConveyor():"production"===t.status?p.stopConveyor():void 0})).then((function(t){"running"===t.status&&P(0,0,5),"production"===t.status&&(console.log(i),P(parseInt(i[0]),parseInt(i[1]),parseInt(i[2])))})).catch((function(t){return console.log(t)}));break;case"production":p.runConveyor().then((function(t){console.log(t),k(5),r("running")})).catch((function(t){return console.log(t)}));break;case"running":p.stopConveyor().then((function(t){console.log(t),O(parseInt(i[0])),y(parseInt(i[1])),k(parseInt(i[2])),r("production")})).catch((function(t){return console.log(t)}))}d>0&&v<=0&&S<=0&&(O((function(t){return t-1})),y((function(t){return 59}))),v>0&&S<=0&&(y((function(t){return t-1})),k((function(t){return 59}))),S>0&&k((function(t){return t-1}))}),1e3),function(){return clearInterval(t)}}),[c,i,d,v,S]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault(),p.stopConveyor().then((function(t){console.log(t)})).catch((function(t){return console.log(t)})),r("starting"),P(0,0,5),console.log(t)},children:[Object(j.jsx)("input",{type:"time",step:"1",defaultValue:"00:03:00",onChange:function(t){h(t.target.value.split(":"))}}),Object(j.jsx)("button",{children:"Send"})]}),Object(j.jsx)("p",{className:"timer",children:"".concat(d,"h:").concat(v,"m:").concat(S,"s")}),Object(j.jsx)("p",{className:"timer",children:"PHASE: ".concat(c)}),Object(j.jsx)("p",{className:"timestamp",children:"timestamp: ".concat(T)})]})},d=function(){return Object(j.jsx)(l.Provider,{value:i,children:Object(j.jsx)(b,{})})},O=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,74)).then((function(n){var e=n.getCLS,o=n.getFID,c=n.getFCP,r=n.getLCP,s=n.getTTFB;e(t),o(t),c(t),r(t),s(t)}))};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(d,{})}),document.getElementById("root")),O()}},[[73,1,2]]]);
//# sourceMappingURL=main.39a736fa.chunk.js.map